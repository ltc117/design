<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
    </style>
    <!-- <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.2"></script> -->
	<!-- <script type="text/javascript" src="http://api.map.baidu.com/getscript?v=2.0&ak=eYf9sA6yVTFHlh9ytU4a0EYY&services=&t=20151223175945"></script> -->
	
    <script type="text/javascript" src="./getscript.js"></script>
	<!-- <script type="text/javascript" src="http://api.map.baidu.com/library/GeoUtils/1.2/src/GeoUtils_min.js"></script> -->
	<!-- <script type="text/javascript" src="./jquery.js"></script>
	<script type="text/javascript" src="./jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="./jquery.json-2.3.min.js"></script> -->
    <script type="text/javascript" src="./GeoUtils_min.js"></script>
    <title>添加多个行政区划鼠标进入区域百度api有问题</title>
</head>
<body>
    <div id="allmap"></div>
</body>
</html>
<script type="text/javascript">

    // 百度地图API功能
    var map = new BMap.Map("allmap");
    map.centerAndZoom("深圳", 14);
    map.enableScrollWheelZoom();
   map.clearOverlays();
   
    
    //黄木岗营销服务中心
    var res1 = '114.10272344660315,22.54988744426671;114.10274790322194,22.549159438384354;114.10273088170479,22.54832632698551;114.1027873169182,22.547025644715323;114.09323665149324,22.546825466172763;114.08742452625913,22.54666919046259;114.07986596240963,22.546532933645153;114.07973821687864,22.546550671525367;114.07900492929191,22.54653535217283;114.07875220578681,22.546517673918242;114.07442299762529,22.546444094053136;114.074325114298,22.550870032317494;114.07432867713409,22.55118484323418;114.07427847878047,22.55273550549679;114.07420287984121,22.557087610722792;114.07404512102481,22.56416026590241;114.07403728849145,22.565546808872885;114.07400255266009,22.566180488247895;114.07397737211471,22.568534599900687;114.07393555605678,22.569359855729708;114.07392740746832,22.571025989701337;'
			+'114.07387964476364,22.572012985493462;114.0772817454841,22.572441984706437;114.07907003819344,22.572638383173697;114.08263500568798,22.573210288577886;114.08416691998293,22.573606473812603;114.08443501405294,22.57381854008357;114.08495419917213,22.574160742213532;114.08558885722961,22.5745500667551;114.08615560019622,22.574953833505738;114.0869524142769,22.575492610811253;114.08787034447788,22.575865727218485;114.08880656436376,22.576172202279363;114.0901296250748,22.576311398579314;114.0903727548213,22.57631835639185;114.0910749435568,22.576304954216575;114.09156120651616,22.576249035826255;114.09228951384793,22.57609748050177;114.09400459126033,22.575627761809375;114.09417129346586,22.5755315748147;114.09441619267983,22.57543487962746;114.094770370814,22.575256194654507;'
			+'114.09561814651528,22.57455511413096;114.09584624441409,22.574343500867123;114.09593659005459,22.574241152509412;114.09609856403806,22.574008843108082;114.09639067420783,22.57373448647945;114.09650410977605,22.573597395593094;114.09697604973238,22.57284455326342;114.09729230428586,22.572292687302046;114.09847859397064,22.570101982386362;114.10249684985017,22.562090694427816;114.1026101328528,22.55543838354841;114.10272344660315,22.54988744426671';
    //梅林营销服务中心
    var res2 = '114.05982723125287,22.59634900373235;114.06044066819439,22.595116827287768;114.06063532613128,22.59476696936592;114.06089366979303,22.594358919055246;114.06113121799727,22.594029188536243;114.06141884635765,22.593694183256243;114.06170616565552,22.59340596559502;114.06227604903862,22.592926013254427;114.06376840980074,22.591597319835735;114.06403729978227,22.591149167406446;114.06426535066052,22.590713425175174;114.06451711929374,22.590141928417562;114.06458730824946,22.589588046275434;114.06476554386309,22.58876566212928;114.06482708002842,22.588559058150924;114.06505215583368,22.58844511877988;114.06535834865052,22.588251812187814;114.06579305144152,22.58806038516458;114.0669118774262,22.587603979869765;114.06742174679752,22.587440683336727;114.06799880534928,22.587311498960265;'
			+'114.06909452116587,22.587301831468668;114.07029378792161,22.587337149544492;114.07156840133379,22.58752418719065;114.07271033099468,22.587769567867312;114.07312624909582,22.58790935760214;114.07339966369791,22.588054803414114;114.07377876907387,22.58828847936762;114.07413270200308,22.588613656358056;114.07456151767711,22.589039476507693;114.07506503064891,22.589599380737877;114.07552967283492,22.590082843514654;114.07720479495177,22.591738638746467;114.0768410612863,22.59073730869961;114.07673260203697,22.59053412796132;114.07672954039951,22.59043015350047;114.07716065628215,22.58773690002659;114.07728642913848,22.587174580957452;114.07800535331107,22.5850787599198;114.07837895445996,22.584135205651428;114.07943477461271,22.581940571468735;114.0795494479028,22.581666397714166;'
			+'114.07965052676883,22.58069651174081;114.08110778877943,22.58037166670718;114.08148791504509,22.580250513925677;114.08152235259172,22.580208452253256;114.08151503119055,22.579806901537488;114.08160294037644,22.579644304904345;114.08173195215701,22.57957000819458;114.08180091689125,22.579551886264873;114.08216113899451,22.579606289176077;114.08226325727767,22.579602104130682;114.08397479507359,22.5785717870527;114.08423161481697,22.578375633532467;114.08462964720795,22.57797579758841;114.08495818217226,22.57747869103111;114.08479152655076,22.577139515657116;114.0847878744768,22.57699599711783;114.08492449531903,22.576582870506787;114.08496232033718,22.576556437289668;114.08558352607456,22.576475676361355;114.08619950316918,22.576518944054943;114.08654934161585,22.57609042342635;'
			+'114.0869524142769,22.575492610811253;114.08615560019622,22.574953833505738;114.08558885722961,22.5745500667551;114.08495419917213,22.574160742213532;114.08443501405294,22.57381854008357;114.08416691998293,22.573606473812603;114.08263500568798,22.573210288577886;114.07907003819344,22.572638383173697;114.0772817454841,22.572441984706437;114.07387964476364,22.572012985493462;114.06850731987865,22.569434883048693;114.0671421985597,22.568906593515894;114.06574532899363,22.568609284732833;114.06433965328374,22.568521428421636;114.06391492031777,22.568513955077723;114.06273523279336,22.56852881181514;114.06068606106503,22.568648014230874;114.06018832586976,22.568694636891266;114.05984057845465,22.56869893767204;114.05904574043244,22.56873926216871;114.05819555099865,22.568726460557762;'
			+'114.05737623037372,22.56863910056175;114.0568978046323,22.56854627993561;114.05313065899408,22.56749115702012;114.05130679959055,22.567092923889554;114.04989465334938,22.566835006266;114.04962027251999,22.56676856663717;114.0449356950477,22.56590560428861;114.03912812937749,22.564964927751255;114.03442655718463,22.564017099563753;114.03287984875558,22.56379481857713;114.03164308427495,22.563709509298413;114.0311252319666,22.56370536067834;114.02974654045043,22.563735588818766;114.02893864486647,22.56372678637386;114.02644246234583,22.563628060022733;114.02613317041022,22.565392842091676;114.02574935020469,22.56716349835975;114.02526960492294,22.56878267478497;114.02466725935575,22.56997721994761;114.02437849335355,22.570510157405565;114.0236378154173,22.571755316162168;'
			+'114.02361931792757,22.571748037380466;114.02223110729278,22.57421348808783;114.02152794203106,22.575497855263382;114.02130198385922,22.57588349042379;114.02118118842154,22.576123090463128;114.02115475537208,22.57614466618615;114.02107722619841,22.576458460253324;114.02085162068248,22.57718622663761;114.02077127513007,22.57748926722185;114.0205974650292,22.578020347897056;114.02048347176797,22.578574767639456;114.0201946012537,22.579608585737606;114.02023983824103,22.580263392542935;114.02028601369341,22.58216634719288;114.02034640591009,22.583633835326314;114.02043688274591,22.585127604264862;114.02094793210284,22.59031041701885;114.02103375638828,22.591045157257632;114.02118901935212,22.592074364409218;114.02127146781447,22.59297105992823;114.02134991243243,22.593610900963153;'
			+'114.02175315629707,22.593588010358836;114.02236113604094,22.593610843532176;114.02323177044904,22.593720373764587;114.02519604544612,22.594126734302368;114.02652546217828,22.59462062634422;114.02897577044294,22.595447232709326;114.03221629398404,22.596587737346827;114.03377825509783,22.597079847505743;114.03445198611483,22.59727824636796;114.03599376799038,22.597800724720216;114.03636141219869,22.597891263458592;114.03828405212145,22.598246703163227;114.0389595426278,22.598345901752083;114.03995986241107,22.598431427921536;114.04062274167093,22.598462986666483;114.0420016626281,22.59845438444562;114.04367557714541,22.598414784661276;114.04564844839761,22.598044706078454;114.0476786279154,22.597597029162564;114.04871165352696,22.59734235563465;114.0524482621063,22.59637630511436;'
			+'114.05272956409453,22.596309187932874;114.05358516011255,22.596178861461212;114.05661780029205,22.596217294341933;114.05729836621354,22.596311129358195;114.0575509072263,22.596412357344896;114.05772769213661,22.59650905416012;114.05806307610564,22.59681135589154;114.05826427358848,22.59717870972441;114.05843010697528,22.59756714377817;114.05842323776537,22.597957007477326;114.05837387782321,22.598186267021585;114.05824964510902,22.598565032830784;114.05813028718666,22.598786039795634;114.05766554505786,22.59945453652997;114.05758459842679,22.599590872725514;114.05657264785694,22.600089201678447;114.05584935386845,22.60040368843304;114.05540612435372,22.601211689413134;114.05554525411853,22.60251328717758;114.05567592241373,22.60347747823542;114.05630567886257,22.603146772891225;'
			+'114.05681684303796,22.602907796907054;114.05738014763575,22.602800616989544;114.05762121367704,22.60260578199598;114.05770953646979,22.602475196765837;114.05843841399933,22.60118007354588;114.0587040956101,22.600962282215278;114.0587784451898,22.600926953867095;114.05942833551342,22.600728547906108;114.0597321575488,22.60029309470951;114.06023866494752,22.599330121992928;114.06028401393277,22.59905492634021;114.0601976850201,22.598725236365247;114.06013388260699,22.598640676474325;114.05955065352344,22.59830139212774;114.05937495935817,22.598182687481145;114.05921767695351,22.597765182591697;114.05915250042598,22.597460781213265;114.05982723125287,22.59634900373235;';

		//莲花北营销服务中心
		var res3 = '114.07393555605678,22.569359855729708;114.07397737211471,22.568534599900687;114.07400255266009,22.566180488247895;114.07403728849145,22.565546808872885;114.07404512102481,22.56416026590241;114.07420287984121,22.557087610722792;114.07427847878047,22.55273550549679;114.07432867713409,22.55118484323418;114.074325114298,22.550870032317494;114.07442299762529,22.546444094053136;114.07346506963329,22.546444607519447;114.0729142833464,22.546413110968697;114.0693576643564,22.54634981039694;114.06273154329797,22.54611920372439;114.05244764716218,22.545971150385544;114.04725124293988,22.54511515401461;114.04500629193674,22.557060875276484;114.0409388170506,22.56015668981419;114.0408476696497,22.560122373603367;114.03869632820522,22.55970949026986;'
			+'114.03770381804792,22.5595386430231;114.03450472002832,22.55906610755822;114.03231132047675,22.559106553877836;114.03124208788375,22.559096849574527;114.03002035644384,22.559058194196574;114.02780195215209,22.558955904116385;114.02737950647108,22.55894932082229;114.02724032919069,22.558932085918002;114.02716433609487,22.55909030738155;114.02714376002788,22.55926796661977;114.02687860867003,22.56056911109058;114.02644246234583,22.563628060022733;114.02893864486647,22.56372678637386;114.02974654045043,22.563735588818766;114.0311252319666,22.56370536067834;114.03164308427495,22.563709509298413;114.03287984875558,22.56379481857713;114.03442655718463,22.564017099563753;114.03912812937749,22.564964927751255;114.0449356950477,22.56590560428861;'
			+'114.04962027251999,22.56676856663717;114.04989465334938,22.566835006266;114.05130679959055,22.567092923889554;114.05313065899408,22.56749115702012;114.0568978046323,22.56854627993561;114.05737623037372,22.56863910056175;114.05819555099865,22.568726460557762;114.05904574043244,22.56873926216871;114.05984057845465,22.56869893767204;114.06018832586976,22.568694636891266;114.06068606106503,22.568648014230874;114.06273523279336,22.56852881181514;114.06391492031777,22.568513955077723;114.06433965328374,22.568521428421636;114.06574532899363,22.568609284732833;114.0671421985597,22.568906593515894;114.06850731987865,22.569434883048693;114.07387964476364,22.572012985493462;114.07392740746832,22.571025989701337;114.07393555605678,22.569359855729708;';
    
    //生成网点
    var wds = '114.03825,22.58717;114.046586,22.582365;114.039543,22.580229;114.047448,22.573689;114.054922,22.560606;114.060671,22.553931;114.065702,22.556601;114.085105,22.56074;114.090279,22.56648';
     
     //商圈部分
     var busi = '114.035663,22.577693;114.039687,22.586369;114.056072,22.584367;114.065558,22.579295;114.055641,22.570752;114.038537,22.569951';
     
     var vs = [];
     //加载区域
     addBoundArray(res1,"#559955");
     addBoundArray(res2,"#55ffee");
     addBoundArray(res3,"#5cc55");
     //加载网点
     loadPoint(wds);
     //加载商圈
     loadBusi(busi,'#cceeff');
     
     
     
     map.setViewport(vs);
     
     function loadPoint(rdata){
     	var ds = rdata.split(';');
      var len = ds.length;
       for(var i =0;i<len;i++){
       	var ar = ds[i].split(',');
       	var poi= new BMap.Point(ar[0],ar[1]);
       	var mark = new BMap.Marker(poi);
       	mark.addEventListener("click",clickPoint);
     		map.addOverlay(mark);
      }
     }
      
    function addBoundArray(rdata,color){
    	var ds = rdata.split(';');
      var len = ds.length;
      var dats = new Array();
	    for(var i =0;i<len-1;i++){
	    	var ar = ds[i].split(',');
	    	var poi= new BMap.Point(ar[0],ar[1]);
	      dats.push(poi);
	    }
	    //alert('---->>'+dats)
	    var bply = new BMap.Polygon(dats, {strokeWeight: 1, strokeColor: "#ff0000",fillOpacity:1,fillColor:color}); //建立多边形覆盖物 
	    bply.oldColor = color;
	    vs=vs.concat(dats);
	    //var bply = new BMap.Polyline(dats, {strokeWeight: 6,strokeStyle:'solid', strokeColor: "#ff0000",strokeOpacity:0.5,strokeColor:color}); //建立多边形折线
	    //var ply = new BMap.Polyline(dats, {strokeWeight: 6,strokeStyle:'dashed', strokeColor: "#ff0000",strokeOpacity:0.5,strokeColor:color}); //建立多边形折线
	    bply.addEventListener("click",clickBound);
	    //bply.addEventListener("mouseover",plymouseover);
      //bply.addEventListener("mouseout",plymouseout);
      //bply.addEventListener("mousemove",plymousemove);
      //bply.addEventListener("lineupdate",plyLineupdate);
	    //map.addOverlay(ply);
	    //bply.addEventListener("mouseenter",plymouseover,true);
      //bply.addEventListener("mouseleave",plymouseout,true);
      
      
      	map.addEventListener('mousemove', function(e){
      		//console.log("zoom = "+map.getZoom());
	    	if(BMapLib.GeoUtils.isPointInPolygon(e.point, bply)){
	       		//bply.setFillOpacity("0.4");
	       		bply.setFillColor('yellow');
	      	}else{
	        	//bply.setFillOpacity("0.2");
	    		bply.setFillColor(color);
	      	}
	    });
      
      
	    map.addOverlay(bply);
    }
    
    function loadBusi(rdata,color){
    	var ds = rdata.split(';');
      var len = ds.length;
      var dats = new Array();
	    for(var i =0;i<len;i++){
	    	var ar = ds[i].split(',');
	    	var poi= new BMap.Point(ar[0],ar[1]);
	      dats.push(poi);
	    }
	    var bply = new BMap.Polygon(dats, {strokeWeight: 1, strokeColor: "#ff0000",fillOpacity:1,fillColor:color}); //建立多边形覆盖物 
	    bply.oldColor = color;
	    bply.addEventListener("click",clickBusi);
	    //map.addOverlay(bply);
    }
    
    function plymousemove(e){
    	 //console.log('=move=='+e);
    	//for(var i in e)
    	// console.log(i+'=move=='+e[i]);
    	//e.target.setFillColor('yellow');
    }
    
    
    function clickPoint(e){
    	alert("点击了网点");
    }
    
    function clickBound(e){
    	alert("点击了多边形");
    }
    
    function clickBusi(e){
    	alert("点击商圈");
    }
    
    function plymouseover(e){
    	//var p = e.pixel;
    	//console.log('-----------over---------------lng='+p.x+';lat='+p.y);
    	
    	//var obj = e.jb;
    	//for(var i in obj)
    	// console.log(i+'=over=='+obj[i]);
    	e.target.setFillColor('yellow');
    }
    
    function plymouseout(e){
    	//var p = e.pixel;
    	//console.log('-----------out---------------lng='+p.x+';lat='+p.y);
    	//for(var i in e)
    	// console.log(i+'=out=='+e[i]);
    	
    	var color = e.target.oldColor;
    	e.target.setFillColor(color);
    }
    
    function plyLineupdate(e){
    	//for(var i in e)
    		//console.log(i+''+e[i])
    }
    
    
    
    
    
</script>

